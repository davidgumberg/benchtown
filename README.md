This is a static-site-generator based on
[bridgetown](https://github.com/bridgetownrb/bridgetown) (jekyll fork). It
serves as a frontend for an experimental tool for performing long running benchmarks of Bitcoin Core, found at https://github.com/bitcoin-dev-tools/benchcoin

## Project Structure

The vast majority of the files and folders here are boilerplate / scaffolding,
so I want to highlight what I think are the relevant parts:

The logic that handles construction of
["resources"](https://www.bridgetownrb.com/docs/resources) (every PR and run
is a 'resource') from the data generated by benchcoin is in
`plugins/builder/pull_requests_builder.rb`.

Almost all of the important stuff left is in `src/`.  For toplevel pages like
the index of `runs` and of `pulls`, an HTML-ERB template file is just placed in
`/src/`. 
The layouts used to render individual resources are located in `/src/_layouts`,
and there are ~two~ three competing abstractions for creating reusable pages,
"layouts", "partials" and "components". Avoid using `partials` entirely, and start
with the layout, if it gets too complicated or you need to reuse it in more than
one layout, then make it a component.

### Where benchcoin data goes

The `PullRequestBuilder` expects there to be a folder `src/benchcoin`: with the
following layout:

```
ğŸ“‚src/benchcoin
    - ğŸ“‚pr-1
        - ğŸ“‚{{github-run-id}}
            - [ ...results generated by bitcoin-dev-tools/benchcoin... ]
    - ğŸ“pr-2
    - [....]
    - ğŸ“‚pr-{{pr-number}}
        - ğŸ“{{github-run-id}}
        - ğŸ“{{github-run-id}}
        - ğŸ“{{github-run-id}}
        - ğŸ“{{github-run-id}}
```

Currently, the layout of `src/benchcoin` is identical to the `results`
[folder](https://github.com/bitcoin-dev-tools/benchcoin/tree/gh-pages/results)
of the `gh-pages` [branch](https://github.com/bitcoin-dev-tools/benchcoin/tree/gh-pages) of
bitcoin-dev-tools/benchcoin.

More details can be found in this repo's gh-pages script
(`.github/workflows/gh-pages.yml`) this repo uses to
generate the Github pages hosted instance, I will move this script to a justfile
to simplify local development.

#### ERB 

[ERB](https://docs.ruby-lang.org/en/3.3/ERB.html) is a templating system for
mixing Ruby expressions with arbitrary plain text documents, where anything
inside of `<% %>` gets evaluated silently, and the result or return value of
evaluating the expression inside of `<%= %>` is inserted into the document.

Control-flow applies outside of the ruby expressions, e.g.:

```erb
# `index.erb`
<% if true %>
    <h1>The statement was true!</h1>
<% else %>
    <h1>The statement was false!</h1>
<% end %>
```

would generate the html file:

```html
# `index.html`
<h1>The statement was true!</h1>
```

#### Why Bridgetown?

Bridgetown serves as a nice middle ground between hand rolling github
actions scripts for generating HTML from benchmark results and a full web-app framework like
Ruby on Rails, it even uses a lot of the same abstractions and libraries as Ruby
on Rails, like erb templates and Github's ViewComponent library, meaning that if
something more full-fat is ever needed, a lot of what's here could be reused.
